# Решение проблем с деплоем на REG.Ru

## Сайт не открывается - диагностика

### Шаг 1: Проверьте, что файлы загружены

1. Подключитесь через FTP (FileZilla) или файловый менеджер REG.Ru
2. Убедитесь, что в папке `public_html` есть:
   - ✅ `index.html`
   - ✅ `.htaccess`
   - ✅ `favicon.svg`
   - ✅ `robots.txt`
   - ✅ `sitemap.xml`
   - ✅ Папка `assets/` с файлами CSS и JS

### Шаг 2: Проверьте структуру папок на сервере

На REG.Ru корневая папка сайта может называться:
- `public_html` (чаще всего)
- `www`
- `htdocs`
- Или просто корень FTP

**Как проверить:**
1. Подключитесь через FTP
2. Посмотрите, какая папка является корневой для вашего домена
3. Если это не `public_html`, обновите `REMOTE_DIR` в `deploy-ftp.js`:

```javascript
const REMOTE_DIR = '/www'; // или другое название
```

### Шаг 3: Проверьте права доступа к файлам

Права доступа должны быть:
- **Файлы:** `644` (rw-r--r--)
- **Папки:** `755` (rwxr-xr-x)

**Как изменить через FTP:**
1. В FileZilla: правый клик на файл → "Права доступа к файлу"
2. Установите: `644` для файлов, `755` для папок

**Как изменить через SSH:**
```bash
chmod 644 public_html/*
chmod 755 public_html/assets
find public_html -type f -exec chmod 644 {} \;
find public_html -type d -exec chmod 755 {} \;
```

### Шаг 4: Проверьте .htaccess

1. Убедитесь, что файл `.htaccess` загружен в корень `public_html`
2. Проверьте, что в нем нет синтаксических ошибок
3. Если сайт не работает, временно переименуйте `.htaccess` в `.htaccess.bak` и проверьте, открывается ли сайт

### Шаг 5: Проверьте консоль браузера

1. Откройте сайт в браузере
2. Нажмите F12 (открыть DevTools)
3. Перейдите на вкладку **Console**
4. Посмотрите на ошибки:
   - Если видите `404` для `/assets/...` - файлы не загружены или неправильный путь
   - Если видите `CORS` ошибки - проблема с настройками сервера
   - Если видите другие ошибки - скопируйте их

### Шаг 6: Проверьте логи сервера

В панели REG.Ru:
1. Перейдите в раздел **"Логи"** или **"Статистика"**
2. Посмотрите на ошибки доступа
3. Проверьте, есть ли ошибки 404, 403, 500

### Шаг 7: Проверьте DNS настройки

1. В панели REG.Ru перейдите в **"Домены"** → **"Управление DNS"**
2. Убедитесь, что:
   - **A-запись** для `@` указывает на `31.31.196.49`
   - **CNAME** для `www` указывает на `@` или IP-адрес

### Шаг 8: Проверьте SSL сертификат

1. В панели REG.Ru найдите раздел **"SSL-сертификаты"**
2. Убедитесь, что SSL сертификат активен для `takto.space`
3. Если сертификат не установлен, установите Let's Encrypt

## Частые проблемы и решения

### Проблема: Белый экран или "Сайт недоступен"

**Решение:**
1. Проверьте, что `index.html` загружен в правильную папку
2. Проверьте права доступа (644 для файлов)
3. Временно отключите `.htaccess` (переименуйте в `.htaccess.bak`)

### Проблема: Сайт открывается, но без стилей

**Решение:**
1. Проверьте, что папка `assets/` загружена
2. Проверьте консоль браузера на ошибки 404
3. Убедитесь, что пути в `index.html` начинаются с `/` (например, `/assets/...`)

### Проблема: Ошибка 403 Forbidden

**Решение:**
1. Проверьте права доступа к файлам (должны быть 644)
2. Проверьте права доступа к папкам (должны быть 755)
3. Проверьте `.htaccess` на наличие правил, блокирующих доступ

### Проблема: Ошибка 500 Internal Server Error

**Решение:**
1. Проверьте `.htaccess` на синтаксические ошибки
2. Временно переименуйте `.htaccess` и проверьте, работает ли сайт
3. Проверьте логи сервера в панели REG.Ru

### Проблема: Редирект на HTTPS не работает

**Решение:**
1. Убедитесь, что SSL сертификат установлен
2. Проверьте `.htaccess` - правило редиректа должно быть в начале файла
3. В панели REG.Ru включите принудительное перенаправление на HTTPS

## Тестовая страница

Создайте файл `test.html` в корне `public_html`:

```html
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>
<body>
    <h1>Сайт работает!</h1>
    <p>Если вы видите это сообщение, значит сервер работает правильно.</p>
</body>
</html>
```

Откройте `https://takto.space/test.html` - если страница открывается, значит проблема в основном сайте.

## Контакты поддержки

Если ничего не помогает:
1. Обратитесь в поддержку REG.Ru: https://www.reg.ru/support/
2. Укажите:
   - Домен: `takto.space`
   - Проблема: сайт не открывается
   - Что уже проверили (из этого списка)
